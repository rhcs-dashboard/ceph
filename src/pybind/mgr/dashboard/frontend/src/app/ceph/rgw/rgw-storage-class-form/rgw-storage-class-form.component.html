<div cdsCol
     [columnNumbers]="{ md: 4 }">
  <ng-container *cdFormLoading="loading">
    <form name="storageClassForm"
          #formDir="ngForm"
          [formGroup]="storageClassForm"
          novalidate>
      <div i18n="form title"
           class="form-header">
        {{ action | titlecase }} {{ resource | upperFirst }}

        <cd-help-text [formAllFieldsRequired]="true"></cd-help-text>
      </div>
      <div class="form-item">
        <cds-select label="Storage Class "
                    for="storageClassType"
                    formControlName="storageClassType"
                    [helperText]= "storageClassText"
                    id="storageClassType"
                    cdRequiredField="Storage Class"
                    [invalid]="storageClassForm.showError('storageClassType', formDir, 'required')"
                   
                    [invalidText]="storageError"
                    >
                    <option value=""
                    i18n>-- Select Storage Class --</option>
                    
          <option value="local"
                  i18n>Local Storage Class</option>
                  <option value="cloud-s3"
                  i18n>Cloud-s3 Storage Class</option>
                  <option value="cloud-s3-glacier"
                  i18n>Glacier Storage Class</option>
        </cds-select>
        <ng-template #storageError>
          <span
            class="invalid-feedback"
            *ngIf="storageClassForm.showError('storageClassType', formDir, 'required')"
            i18n
            >This field is required.</span
          >
        </ng-template>
      </div>
      <div class="form-item form-item-append"
           cdsRow>
        <div cdsCol>
          <!-- Zone Group -->
          <cds-select
            label="Zone Group Name"
            i18n-label
            formControlName="zonegroup"
            id="zonegroup"
            [invalid]="storageClassForm.showError('zonegroup', formDir, 'required')"
            (change)="onZonegroupChange()"
            [invalidText]="zonegroupError"
          >
            <option
              *ngFor="let zonegrp of zonegroupNames"
              [value]="zonegrp.name"
              [selected]="zonegrp.name === storageClassForm.getValue('zonegroup')"
              i18n
            >
              {{ zonegrp.name }}
            </option>
          </cds-select>
          <ng-template #zonegroupError>
            <span
              class="invalid-feedback"
              *ngIf="storageClassForm.showError('zonegroup', formDir, 'required')"
              i18n
              >This field is required.</span
            >
          </ng-template>
        </div>
        <div cdsCol>
          <!-- Placement Target -->
          <cds-select
            label="Placement Target"
            i18n-label
            formControlName="placement_target"
            id="placement_target"
            [invalid]="storageClassForm.showError('placement_target', formDir, 'required')"
            [invalidText]="placementError"
          >
            <option [value]=""
                    i18n>--Select--</option>
            <option
              *ngFor="let placementTarget of placementTargets"
              [value]="placementTarget"
              [selected]="placementTarget === storageClassForm.getValue('placement_target')"
              i18n
            >
              {{ placementTarget }}
            </option>
          </cds-select>
          <ng-template #placementError>
            <span
              class="invalid-feedback"
              *ngIf="storageClassForm.showError('placement_target', formDir, 'required')"
              i18n
              >This field is required.</span
            >
          </ng-template>
        </div>
      </div>
      <!-- Storage Class -->
      <div class="form-item">
        <cds-text-label
          labelInputID="storage_class"
          i18n
          [disabled]="editing"
          [invalid]="
            storageClassForm.controls.storage_class.invalid &&
            storageClassForm.controls.storage_class.dirty
          "
          [invalidText]="storageClassTypeError"
          cdRequiredField="Storage Class Type"
          >Storage Class Name
          <input
            cdsText
            type="type"
            id="storage_class"
            formControlName="storage_class"
            [invalid]="storageClassForm.showError('storage_class', formDir, 'required')"
          />
        </cds-text-label>
        <ng-template #storageClassTypeError>
          <span
            class="invalid-feedback"
            *ngIf="storageClassForm.showError('storage_class', formDir, 'required')"
            i18n
            >This field is required.</span
          >
        </ng-template>
      </div>
      <div *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3' || storageClassForm.getValue('storageClassType') === 'cloud-s3-glacier'">
        <div class="form-item form-item-append"
             cdsRow>
          <div cdsCol>
            <!-- Target Region -->
            <cds-text-label
              labelInputID="region"
              i18n
              [invalid]="storageClassForm.showError('region', formDir, 'required')"
              [invalidText]="regionError"
              [helperText]="targetRegionText"
              >Target Region
              <input
                cdsText
                type="text"
                id="region"
                formControlName="region"
                placeholder="e.g, us-east-1"
                i18n-placeholder
                [invalid]="storageClassForm.showError('region', formDir, 'required')"
              />
            </cds-text-label>
            <ng-template #regionError>
              <span
                class="invalid-feedback"
                *ngIf="storageClassForm.showError('region', formDir, 'required')"
                i18n
                >This field is required.</span
              >
            </ng-template>
          </div>
          <div cdsCol>
            <!-- Target Endpoint -->
            <cds-text-label
              labelInputID="endpoint"
              i18n
              [invalid]="storageClassForm.showError('endpoint', formDir, 'required')"
              [invalidText]="endpointError"
              [helperText]="targetEndpointText"
              >Target Endpoint
              <input
                cdsText
                type="text"
                placeholder="e.g, http://ceph-node-00.com:80"
                i18n-placeholder
                id="endpoint"
                formControlName="endpoint"
                [invalid]="storageClassForm.showError('endpoint', formDir, 'required')"
              />
            </cds-text-label>
            <ng-template #endpointError>
              <span
                class="invalid-feedback"
                *ngIf="storageClassForm.showError('endpoint', formDir, 'required')"
                i18n
                >This field is required.</span
              >
            </ng-template>
          </div>
        </div>

    </div>
    <cd-form-advanced-fieldset title="Glacier Storage Class" *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3'">
   
      <cd-rgw-cloud-s3-form [storageClassType]= "storageClassForm.getValue('storageClassType')" 
      ></cd-rgw-cloud-s3-form>
      </cd-form-advanced-fieldset>

    <cd-form-advanced-fieldset title="Glacier Storage Class" *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3-glacier'">
   
    <cd-rgw-glacier-storageclass-form [storageClassType]= "storageClassForm.getValue('storageClassType')" 
    ></cd-rgw-glacier-storageclass-form>
    </cd-form-advanced-fieldset>


      <div *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3' || storageClassForm.getValue('storageClassType') === 'cloud-s3-glacier'">
        <ng-template #title>
          <h5 class="cds--accordion__title cd-header">Advanced</h5>
        </ng-template>
        <fieldset>
          <cds-accordion size="lg"
                         class="form-item">
            <cds-accordion-item
              [title]="title"
              id="advanced-fieldset"
              (selected)="showAdvanced = !showAdvanced"
            >
                 <!-- Multi Part Sync Threshold -->
                 <div class="form-item form-item-append"
                 cdsRow>
                 <div cdsCol>
                  <cds-text-label
                    labelInputID="multipart_sync_threshold"
                    i18n
                    [helperText]="multipartSyncThreholdText"
                    cdOptionalField="Multipart Sync Threshold"
                    >Multipart Sync Threshold
                    <input
                      cdsText
                      type="text"
                      id="multipart_sync_threshold"
                      formControlName="multipart_sync_threshold"
                    />
                  </cds-text-label>
                </div>
                <div cdsCol>
                  <cds-text-label
                    labelInputID="multipart_min_part_size"
                    i18n
                    [helperText]="multipartMinPartText"
                    cdOptionalField="Multipart Minimum Part Size"
                    >Multipart Minimum Part Size
                    <input
                      cdsText
                      type="text"
                      id="multipart_min_part_size"
                      formControlName="multipart_min_part_size"
                    />
                  </cds-text-label>
                </div>
            </div>
            <div class="form-item">
              <cds-checkbox
                id="retain_head_object"
                formControlName="retain_head_object"
                cdOptionalField="Retain Head Object"
                i18n-label
                >Retain Head Object
                <cd-help-text>{{ retainHeadObjectText }}</cd-help-text>
              </cds-checkbox>
            </div>
            <div class="form-item">
              <cds-checkbox
                id="allow_read_through"
                formControlName="allow_read_through"
                cdOptionalField="Allow Read Through"
                i18n-label
                >Allow Read Through
                <cd-help-text>{{ allowReadThroughText }}</cd-help-text>
              </cds-checkbox>
            </div>
            <div class="form-item" *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3-glacier'">
              <cds-text-label
                labelInputID="storage_class"
                i18n
                [disabled]="editing"
                [invalid]="
                  storageClassForm.controls.storage_class.invalid &&
                  storageClassForm.controls.storage_class.dirty
                "
                [invalidText]="storageError"
                >ACLs
                <input
                  cdsText
                  type="type"
                  id="storage_class"
                  formControlName="storage_class"
                  [invalid]="storageClassForm.showError('storage_class', formDir, 'required')"
                />
              </cds-text-label>
              <ng-template #storageError>
                <span
                  class="invalid-feedback"
                  *ngIf="storageClassForm.showError('storage_class', formDir, 'required')"
                  i18n
                  >This field is required.</span
                >
              </ng-template>
            </div>
        </cds-accordion-item>
      </cds-accordion>
    </fieldset>
    </div>
      <cd-alert-panel type="warning"
                      spacingClass="mb-2" *ngIf="storageClassForm.getValue('storageClassType') === 'cloud-s3' || storageClassForm.getValue('storageClassType') === 'cloud-s3-glacier'">
        <span i18n>RGW service would be restarted after creating the storage class.</span>
      </cd-alert-panel>
      <cd-form-button-panel
        (submitActionEvent)="submitAction()"
        [form]="storageClassForm"
        [submitText]="(action | titlecase) + ' ' + (resource | upperFirst)"
        wrappingClass="text-right"
      ></cd-form-button-panel>
    </form>
  </ng-container>
</div>