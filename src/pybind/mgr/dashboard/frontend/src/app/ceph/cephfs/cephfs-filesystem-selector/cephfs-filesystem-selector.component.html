<div><h5 i18n>Select File System</h5></div>
<cd-alert-panel type="info"
                i18n>
  <div>
    <strong class="requirements-title">Selection requirements</strong>
    <ul class="requirements-list">
      <li>Only one filesystem can be selected as the mirroring target</li>
      <li>The selected filesystem must have an active MDS (Metadata Server)</li>
      <li>If mirroring is already enabled, the existing configuration will be reused</li>
      <li>Ensure sufficient storage capacity for incoming mirrored snapshots</li>
    </ul>
  </div>
</cd-alert-panel>

<cd-table
  [data]="filesystems"
  [columns]="columns"
  columnMode="flex"
  identifier="id"
  selectionType="single"
  headerTitle="Select target filesystem"
  headerDescription="Choose the filesystem that will receive mirrored data from the local cluster."
  (updateSelection)="updateSelection($event)"
>
  <ng-template #mdsStatus
               let-value="data.value"
               let-row="data.row">
    <div [cdsStack]="'horizontal'"
         gap="4">
      @if (value === 'Active') {
      <cd-icon type="success"> </cd-icon>
      }
      @if (value === 'Inactive') {
      <cd-icon type="warning"> </cd-icon>
      }
      <span class="cds-ml-3">{{ value | titlecase }}</span>
    </div>
  </ng-template>

  <ng-template #mirroringStatus
               let-value="data.value"
               let-row="data.row">
    <div [cdsStack]="'horizontal'"
         gap="4">
      @if (value === 'Enabled') {
      <cd-icon type="success"> </cd-icon>
      }
      @if (value === 'Disabled') {
      <cd-icon type="warning"> </cd-icon>
      }
      <span class="cds-ml-3">{{ value | titlecase }}</span>
    </div>
  </ng-template>

  <ng-template
               let-row="row"
               let-col="col">
    <ng-container [ngSwitch]="col.prop">
      <ng-container *ngSwitchCase="'pools'">
        <span *ngFor="let pool of row.pools; let last = last">
          <cd-badge>{{ pool }}</cd-badge>
          <span *ngIf="!last">, </span>
        </span>
      </ng-container>
      <ng-container *ngSwitchDefault>
        {{ row[col.prop] }}
      </ng-container>
    </ng-container>
  </ng-template>
</cd-table>
